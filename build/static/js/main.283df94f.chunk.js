(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{215:function(e,t,a){},216:function(e,t,a){},380:function(e,t,a){"use strict";a.r(t);var n=a(7),c=a(0),r=a.n(c),s=a(32),o=a.n(s),i=(a(215),a(36)),l=a(60),d=(a(216),a(382)),j=a(65),b=a(392),u=a(393),h=function(e){var t=e.color,a=void 0===t?"white":t;return Object(n.jsx)("h2",{className:"logo",style:{color:a,display:"inline"},children:"HotZ\ud83c\udfafne"})},x=d.a.Content,O=d.a.Footer,p=d.a.Header,m=function(e){var t=e.children;return Object(n.jsxs)(d.a,{style:{minHeight:"100vh"},children:[Object(n.jsx)(p,{children:Object(n.jsxs)(j.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],children:[Object(n.jsx)(j.a.Item,{children:Object(n.jsx)(h,{})},"0"),Object(n.jsx)(j.a.Item,{icon:Object(n.jsx)(b.a,{}),children:Object(n.jsx)(l.b,{to:"/",children:"Locations"})},"1"),Object(n.jsx)(j.a.Item,{icon:Object(n.jsx)(u.a,{}),children:Object(n.jsx)(l.b,{to:"/cases",children:"Cases"})},"2"),Object(n.jsx)(j.a.Item,{icon:Object(n.jsx)(u.a,{}),children:Object(n.jsx)(l.b,{to:"/patients",children:"Patients"})},"3"),Object(n.jsx)(j.a.Item,{icon:Object(n.jsx)(u.a,{}),children:Object(n.jsx)(l.b,{to:"/settings",children:"Settings"})},"4")]})}),Object(n.jsxs)(d.a,{children:[Object(n.jsx)(x,{style:{margin:"24px 16px 0"},children:Object(n.jsx)("div",{className:"site-layout-background",style:{padding:24,minHeight:360},children:t})}),Object(n.jsx)(O,{style:{textAlign:"center"},children:"Made with \u2665\ufe0f"})]})]})},f=a(6),g=a(391),k=a(177),v=a(383),y=a(44),I=a.n(y),w=([{title:"ID",dataIndex:"id",key:"id"}].concat([{title:"Name",dataIndex:"name",key:"name"},{title:"X Co-ordinate",dataIndex:"x_coord",key:"x_coord"},{title:"Y Co-ordinate",dataIndex:"y_coord",key:"y_coord"},{title:"Address",dataIndex:"address",key:"address"}]),a(28)),S=a.n(w),z=a(37),C=a(387),_=a(388),T=a(384),A=a(207),L=a(130),F=a(73),P=C.a.Title,q=_.a.Search,D=T.a.Meta,N=function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(null),o=Object(f.a)(s,2),i=o[0],l=o[1],d=Object(c.useState)(!1),j=Object(f.a)(d,2),b=j[0],u=j[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(P,{level:2,children:"Add location to HotZone"}),Object(n.jsx)(q,{placeholder:"Enter Location Name",allowClear:!0,loading:!1,enterButton:"Search Location",size:"large",style:{marginBottom:40},onSearch:function(){var e=Object(z.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("https://group-q-hotzone.herokuapp.com/hotzone/locations/".concat(t),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((function(e){r(null===e||void 0===e?void 0:e.data)})).catch((function(e){A.a.error({message:"Error Finding Location",description:e.response.data})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(n.jsx)(L.a.Group,{onChange:function(e){return l(e.target.value)},value:i,style:{width:"100%"},children:a.map((function(e,t){var a=e.name,c=e.address,r=e.x_coord,s=e.y_coord;return Object(n.jsx)(T.a,{children:Object(n.jsx)(D,{avatar:Object(n.jsxs)(L.a,{value:t,children:[a,c&&", ".concat(c)," - ",r,", ",s]})})},t)}))}),null!==i&&Object(n.jsx)(F.a,{type:"primary",style:{width:"100%"},loading:b,onClick:Object(z.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,I.a.post("https://group-q-hotzone.herokuapp.com/hotzone/locations/",a[i],{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((function(e){A.a.success({message:"Location Created",description:JSON.stringify(e.data)}),r([]),l(null)})).catch((function(e){A.a.error({message:"Error Creating Location",description:e.response.data})}));case 3:u(!1);case 4:case"end":return e.stop()}}),e)}))),children:"Create Location"})]})},E=C.a.Title,H=[{title:"HKID",dataIndex:"hkid",key:"hkid"},{title:"Name",dataIndex:"name",key:"name"},{title:"Date of Birth",dataIndex:"dob",key:"dob"}],B=function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(!0),o=Object(f.a)(s,2),i=o[0],l=o[1],d=Object(c.useState)(""),j=Object(f.a)(d,2),b=j[0],u=j[1];return Object(c.useEffect)((function(){(function(){var e=Object(z.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,I.a.get("https://group-q-hotzone.herokuapp.com/hotzone/patients.json",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,a=t.data,r(a),l(!1),u(""),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),r([]),u("failed to fetch patients data"),l(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}})()()}),[]),b&&""!==b?Object(n.jsx)("p",{children:b}):i?Object(n.jsx)(g.b,{size:"middle",children:Object(n.jsx)(k.a,{size:"large"})}):a&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(E,{level:2,children:"All patients"}),Object(n.jsx)(v.a,{dataSource:a,columns:H})]})},J=C.a.Title,K=[{title:"Pathogen",dataIndex:["virus","name"],key:"pathogen"},{title:"Case number",dataIndex:"case_no",key:"case_no"},{title:"Confirmed on",dataIndex:"confirmed",key:"confirmed"},{title:"Origin",dataIndex:"origin",key:"origin"},{title:"Patient Name",dataIndex:["patient","name"],key:"patient_name"},{title:"Actions",key:"actions",render:function(e,t){return Object(n.jsx)(l.b,{to:"/case/".concat(t.case_no),children:"Details"})}}],M=function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(!0),o=Object(f.a)(s,2),i=o[0],l=o[1],d=Object(c.useState)(""),j=Object(f.a)(d,2),b=j[0],u=j[1];return Object(c.useEffect)((function(){(function(){var e=Object(z.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,I.a.get("https://group-q-hotzone.herokuapp.com/hotzone/cases.json",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,a=t.data,r(a),l(!1),u(""),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),r([]),u("failed to fetch cases data"),l(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}})()()}),[]),b&&""!==b?Object(n.jsx)("p",{children:b}):i?Object(n.jsx)(g.b,{size:"middle",children:Object(n.jsx)(k.a,{size:"large"})}):a&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(J,{level:2,children:"All cases"}),Object(n.jsx)(v.a,{dataSource:a,columns:K})]})},X=a(385),Y=a(389),Z=a(390),G=X.a.Panel,R=d.a.Content,U=C.a.Title,Q=function(){var e=Object(i.g)().case_no,t=Object(c.useState)({}),a=Object(f.a)(t,2),r=a[0],s=a[1],o=Object(c.useState)(!0),d=Object(f.a)(o,2),j=d[0],b=d[1],u=Object(c.useState)(""),h=Object(f.a)(u,2),x=h[0],O=h[1];return Object(c.useEffect)((function(){(function(){var t=Object(z.a)(S.a.mark((function t(){var a,n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(!0),t.prev=1,t.next=4,I.a.get("https://group-q-hotzone.herokuapp.com/hotzone/case/".concat(e),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}});case 4:a=t.sent,(n=a.data).locations.sort((function(e,t){return e.date_from>t.date_to?1:-1})),s(n),b(!1),O(""),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),s({}),b(!1),O("failed to fetch case data");case 17:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),x&&""!==x?Object(n.jsx)("p",{children:x}):j?Object(n.jsx)(g.b,{size:"middle",children:Object(n.jsx)(k.a,{size:"large"})}):r.confirmed&&Object(n.jsxs)(R,{style:{textAlign:"left"},children:[Object(n.jsxs)(Y.a,{children:[Object(n.jsx)(Y.a.Item,{children:Object(n.jsx)(l.b,{to:"/cases",children:"Cases"})}),Object(n.jsx)(Y.a.Item,{children:"Case number: #".concat(e)})]}),Object(n.jsx)(U,{level:2,children:"Case details"}),Object(n.jsxs)(Z.a,{title:"Case details",children:[Object(n.jsx)(Z.a.Item,{label:"Infecting pathogen",children:r.virus.name}),Object(n.jsx)(Z.a.Item,{label:"Confirmed date",children:r.confirmed}),Object(n.jsx)(Z.a.Item,{label:"Origin",children:"I"===r.origin?"Imported":"Local"})]}),Object(n.jsxs)(Z.a,{title:"Patient",children:[Object(n.jsx)(Z.a.Item,{label:"HKID",children:r.patient.hkid}),Object(n.jsx)(Z.a.Item,{label:"Name",children:r.patient.name}),Object(n.jsx)(Z.a.Item,{label:"Date of birth",children:r.patient.dob})]}),Object(n.jsx)(U,{level:3,children:"Locations visited"}),Object(n.jsx)(X.a,{children:r.locations.map((function(e,t){return Object(n.jsx)(G,{header:"".concat(e.location.name," | From: ").concat(e.date_from," - To: ").concat(e.date_to),children:Object(n.jsxs)(Z.a,{children:[Object(n.jsx)(Z.a.Item,{label:"Location ID",children:e.location.id}),Object(n.jsx)(Z.a.Item,{label:"Address",children:e.location.address}),Object(n.jsx)(Z.a.Item,{label:"X coordinates",children:e.location.x_coord}),Object(n.jsx)(Z.a.Item,{label:"Y coordinates",children:e.location.y_coord})]})},"".concat(e.location.name," ").concat(e.date_from))}))})]})},V=a(206),W=a(386),$=function(){var e=Object(c.useState)(!1),t=Object(f.a)(e,2),a=t[0],r=t[1],s=function(){var e=Object(z.a)(S.a.mark((function e(t){var a,n,c,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,r(!0),e.prev=2,e.next=5,I.a.post("https://group-q-hotzone.herokuapp.com/login/",{username:a,password:n});case 5:c=e.sent,(s=c.data.token)&&(localStorage.setItem("token",s),localStorage.setItem("userLoggedIn",a)),V.b.success("logged in successfully"),document.location.href="/",e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),V.b.error("failed to login");case 15:r(!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(h,{color:"black"}),Object(n.jsxs)(W.a,{style:{marginRight:"auto",marginLeft:"auto",width:"50%"},name:"basic",onFinish:s,children:[Object(n.jsx)(W.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(n.jsx)(_.a,{})}),Object(n.jsx)(W.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(n.jsx)(_.a.Password,{})}),Object(n.jsx)(W.a.Item,{children:Object(n.jsx)(F.a,{type:"primary",htmlType:"submit",loading:a,children:"Submit"})})]})]})},ee=C.a.Title,te=function(){var e=Object(c.useState)(""),t=Object(f.a)(e,2),a=t[0],r=t[1];return Object(n.jsxs)("div",{children:[Object(n.jsx)(ee,{children:"Change Password"}),Object(n.jsx)(_.a,{placeholder:"new password",type:"password",onChange:function(e){r(e.target.value)}}),Object(n.jsx)(F.a,{style:{marginTop:"12px"},type:"primary",onClick:Object(z.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a&&a.length>3)){e.next=8;break}return e.next=4,I.a.put("https://group-q-hotzone.herokuapp.com/hotzone/change_password/",{new_password:a},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}});case 4:V.b.success("password changed successfully!"),r(""),e.next=9;break;case 8:V.b.error("password is too short or blank!");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),V.b.error("failed to change password");case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),children:"Change"})]})},ae=function(){return localStorage.getItem("token")?Object(n.jsx)(m,{children:Object(n.jsxs)(i.d,{children:[Object(n.jsx)(i.b,{exact:!0,path:"/",children:Object(n.jsx)(N,{})}),Object(n.jsx)(i.b,{exact:!0,path:"/cases",children:Object(n.jsx)(M,{})}),Object(n.jsx)(i.b,{path:"/case/:case_no",children:Object(n.jsx)(Q,{})}),Object(n.jsx)(i.b,{exact:!0,path:"/patients",children:Object(n.jsx)(B,{})}),Object(n.jsx)(i.b,{exact:!0,path:"/settings",children:Object(n.jsx)(te,{})})]})}):Object(n.jsx)(i.a,{to:"/login"})},ne=function(){return Object(n.jsx)("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:Object(n.jsx)($,{})})},ce=function(){return Object(n.jsx)("div",{className:"App",style:{height:"100vh"},children:Object(n.jsx)(l.a,{children:Object(n.jsxs)(i.d,{children:[Object(n.jsx)(i.b,{path:"/login",children:Object(n.jsx)(ne,{})}),Object(n.jsx)(i.b,{path:"/",children:Object(n.jsx)(ae,{})})]})})})},re=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,394)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(ce,{})}),document.getElementById("root")),re()}},[[380,1,2]]]);
//# sourceMappingURL=main.283df94f.chunk.js.map